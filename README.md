HeroesDB.net frontend
=====================
This is the frontend for [heroesdb.net](http://www.heroesdb.net/), which is a Vindictus item database website. Requires a `data` directory generated by the [backend](https://gitlab.com/niaru/heroesdb-be/), to be of any use. In this repository are all HTML, CSS, JavaScript and image files required for the website. JavaScript uses an old [AngularJS](https://angularjs.org/) (1.3.2) framework. CSS uses parts of an old [Angular Material](https://material.angularjs.org/latest/layout/introduction) framework's layout engine.

Development
-----------
All you need for development is a `data` directory generated by the [backend](https://gitlab.com/niaru/heroesdb-be/), then you can serve this with any webserver and it will work. As this is a single-page application, webserver needs to rewrite all requests starting with `/items` to `/index.html`. I used [Mongoose](https://docs.cesanta.com/mongoose_binary/) webserver with `url_rewrites /items**=C:\Home\Code\HeroesDB\www\index.html` in the config.

You shouldn't need to change anything here, when updating to a newer game version, except for when new characters or weapon types are added (see commit history for how Delia was added).

Deployment
----------
When deploying, you should increment the version numbers in `index.html`, a version number will be appended to all requests on the data directory, which allows you to set aggressive catching (as seen in the config example, at the end of this file). Other than that, just copy all relevant files to a new directory and run HTML, CSS, JavaScript compressors and image optimizers ([HtmlCompressor](https://code.google.com/archive/p/htmlcompressor/), [YUI Compressor](http://yui.github.io/yuicompressor/), [OptiPNG](http://optipng.sourceforge.net/)), then transfer to the live server. If you're using YUI Compressor, check if CSS `calc()` is handled correctly, should be `calc(a + b)`, not `calc(a+b)`, which didn't work last time I checked.

Lighttpd config
---------------
I used [Lighttpd](https://www.lighttpd.net/) for the public server, with the following lines in the config, among other typical settings.

	url.rewrite-once = ( "^/items" => "/")

	compress.allowed-encodings = ( "gzip", "deflate" )
	compress.cache-dir = cache_dir + "/compress"
	compress.filetype = (
		"application/json; charset=utf-8",
		"text/css; charset=utf-8",
		"text/html; charset=utf-8",
		"text/javascript; charset=utf-8",
		"text/plain; charset=utf-8",
		"text/xml; charset=utf-8"
	)

	$HTTP["url"] =~ "^/$" {
		setenv.add-response-header += ( "Cache-Control" => "must-revalidate" )
	}
	else $HTTP["url"] !~ "^/$" {
		expire.url = (
			""  => "access plus 1 months"
		)
	}
